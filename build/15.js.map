{"version":3,"sources":["../../src/pages/general/general.module.ts","../../src/pages/general/general.ts"],"names":[],"mappings":"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","file":"15.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { GeneralPage } from './general';\n\n@NgModule({\n  declarations: [\n    GeneralPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(GeneralPage),\n    TranslateModule.forChild(),\n  ],\n})\nexport class GeneralPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/general/general.module.ts","import { Component } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { IonicPage, NavController, NavParams, MenuController, ToastController, AlertController, LoadingController } from 'ionic-angular';\nimport { Api } from '../../providers';\nimport { Storage } from '@ionic/storage';\n\n/**\n * Generated class for the GeneralPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-general',\n  templateUrl: 'general.html',\n})\nexport class GeneralPage {\n\n  semail: any = null;\n  emailerror: any = null;\n  passwordupdatedtitle: any = null;\n  invalidcode: any = null;\n  passwordtext: any = null;\n  step: any = 1;\n  code: any = null;\n  newpassword: any = null;\n  lang: any = null;\n  constructor(public navCtrl: NavController, public navParams: NavParams, public menu: MenuController,\n    public toast: ToastController, public api: Api, public translateService: TranslateService, public alertCtrl:AlertController,\n    private storage: Storage,) {\n      this.storage.get('_settings')\n      .then((settings) => {\n        if(settings==null){\n         this.lang = 'fr';\n        }else{\n          this.lang = settings.language;\n        }\n      });\n      this.translateService.get(['EMAILNOTFOUND', 'NEWPASSWORD', 'INVALIDCODE', 'PASSWORDTEXT']).subscribe((res) => {\n        this.emailerror = res.EMAILNOTFOUND;\n        this.passwordupdatedtitle = res.NEWPASSWORD;\n        this.invalidcode = res.INVALIDCODE;\n        this.passwordtext = res.PASSWORDTEXT;\n      })\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad GeneralPage');\n  }\n\n  ionViewDidEnter() {\n    // the root left menu should be disabled on the tutorial page\n    this.menu.enable(false);\n  }\n\n  doCheckEmail() {\n    let data = {email : this.semail, lang: this.lang};\n    let seq = this.api.post('forgottenpassword', data).share();\n    seq.subscribe((res: any) => {\n      \n      if (res.error == true) {\n        let toast = this.toast.create({\n          message: this.emailerror,\n          position: 'top',\n          showCloseButton: true\n        });\n        toast.present();\n      } else {\n        this.step = 2;\n      }\n    }, (err) => {\n      //this.navCtrl.push(MainPage);\n      // Unable to log in\n    }, () => { });\n  }\n\n  doUpdatePassword() {\n    let data = {code : this.code, password : this.newpassword};\n    let seq = this.api.post('updatepassword', data).share();\n    seq.subscribe((res: any) => {\n      \n      if (res.error == true) {\n        let toast = this.toast.create({\n          message: this.invalidcode,\n          position: 'top',\n          showCloseButton: true\n        });\n        toast.present();\n      } else {\n        let buttonhandler = {\n          text: 'OK',\n          handler: () => {\n            this.navCtrl.setRoot('LoginPage');\n          }\n        };\n        let confirmAlert = this.alertCtrl.create({\n          title: this.passwordupdatedtitle,\n          message: this.passwordtext,\n          buttons: [buttonhandler]\n        });\n        confirmAlert.present();\n      }\n    }, (err) => {\n      //this.navCtrl.push(MainPage);\n      // Unable to log in\n    }, () => { });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/general/general.ts"],"sourceRoot":""}